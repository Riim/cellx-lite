!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.cellx=e()})(this,(function(){"use strict";function t(){return String(++p)}function e(){this._events=new C}function i(t,e){for(var n=Object.getOwnPropertyNames(e),s=0,r=n.length;s<r;s++){var h=n[s];Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(e,h))}if(arguments.length>2){s=2;do{i(t,arguments[s])}while(++s<arguments.length)}return t}function n(){}function s(){if(N){N=!1,U=!0;for(var t=M.get(D);;){var e=t&&t.shift();if(e){var i=e._level,n=e._changeEvent;if(!n){if(i>D||-1==e._levelInRelease){if(!t.length){if(D==F)break;t=M.get(++D)}continue}if(e.pull(),(i=e._level)>D){t.length||(t=M.get(++D));continue}n=e._changeEvent}if(e._levelInRelease=-1,n){var s=D;e._fixedValue=e._value,e._changeEvent=null,e._handleEvent(n);for(var r=e._pushingIndex,h=e._slaves,a=0,o=h.length;a<o;a++){var l=h[a];l._level<=i&&(l._level=i+1),r>=l._pushingIndex&&(l._pushingIndex=r,l._changeEvent=null,l._addToRelease())}if(D!=s){t=M.get(D);continue}}if(!t.length){if(D==F)break;t=M.get(++D)}}else{if(D==F)break;t=M.get(++D)}}if(D=L,F=-1,U=!1,Y++,k){var u=k;k=null;for(var c=0,f=u.length;c<f;c++)u[c]()}}}function r(t,e){t.push(e)}function h(t,i){e.call(this),this.owner=i&&i.owner||this,this._pull="function"==typeof t?t:null,this._get=i&&i.get||null,this._merge=i&&i.merge||null,this._put=i&&i.put||r,this._reap=i&&i.reap||null,this._pull?this._fixedValue=this._value=void 0:(this._merge&&(t=this._merge(t,void 0)),this._fixedValue=this._value=t,t instanceof e&&t.on("change",this._onValueChange,this)),this._error=null,this._pushingIndex=0,this._version=0,this._masters=void 0,this._slaves=[],this._level=0,this._levelInRelease=-1,this._changeEvent=null,this._lastErrorEvent=null,this._state=q,i&&(i.onChange&&this.on("change",i.onChange),i.onError&&this.on("error",i.onError))}function a(){this._valueCounts=new C}function o(t,e){return t<e?-1:t>e?1:0}function l(t,i){e.call(this),a.call(this),"boolean"==typeof i&&(i={adoptsValueChanges:i}),this._items=[],this.length=0,this.adoptsValueChanges=!(!i||!i.adoptsValueChanges),this.comparator=null,this.sorted=!1,i&&(i.sorted||i.comparator&&!1!==i.sorted)&&(this.comparator=i.comparator||o,this.sorted=!0),t&&this._addRange(t)}function u(t,i){if(e.call(this),a.call(this),"boolean"==typeof i&&(i={adoptsValueChanges:i}),this._entries=new C,this.size=0,this.adoptsValueChanges=!(!i||!i.adoptsValueChanges),t){var n=this._entries;if(t instanceof u||t instanceof C)t._entries.forEach((function(t,e){this._registerValue(t),n.set(e,t)}),this);else if(Array.isArray(t))for(var s=0,r=t.length;s<r;s++){var h=t[s];this._registerValue(h[1]),n.set(h[0],h[1])}else for(var o in t)this._registerValue(t[o]),n.set(o,t[o]);this.size=n.size}}function c(){var t=x.console;(t&&t.error||n).call(t||x,Z.call(arguments,(function(t){return t===Object(t)&&t.stack||t})).join(" "))}function f(t,e,i){var n=e+"Cell";return t[n]=i instanceof h?i:new h(i,{owner:t}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[n].get()},set:function(t){this[n].set(t)}}),t}function _(t,e){return Object.keys(e).forEach((function(i){f(t,i,e[i])})),t}function v(t,e,i){return 3==arguments.length?f(t,e,i):_(t,e),t}var g={_handler:null,setHandler:function(t){this._handler=t},log:function(){this._handler.apply(this,arguments)}},p=0,d=Function("return this;")().Symbol;d||((d=function(e){return"__"+e+"_"+Math.floor(1e9*Math.random())+"_"+t()+"__"}).iterator=d("Symbol.iterator"));var m=d,y=m("cellx.uid"),E=m("cellx.cells"),x=Function("return this;")(),b=Object.prototype.hasOwnProperty,w=x.Map;if(!w||-1==w.toString().indexOf("[native code]")||!new w([[1,1]]).size){var V={value:void 0};(w=function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,i=t.length;e<i;e++)this.set(t[e][0],t[e][1])}).prototype={constructor:w,has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(t){return(this._entries[this._getValueStamp(t)]||V).value},set:function(t,e){var i=this._entries,n=this._getValueStamp(t);if(i[n])i[n].value=e;else{var s=i[n]={key:t,keyStamp:n,value:e,prev:this._last,next:null};this.size++?this._last.next=s:this._first=s,this._last=s}return this},delete:function(t){var e=this._getValueStamp(t),i=this._entries[e];if(!i)return!1;if(--this.size){var n=i.prev,s=i.next;n?n.next=s:this._first=s,s?s.prev=n:this._last=n}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(e){if(!b.call(e,y)){if(!Object.isExtensible(e)){var i,n=this._objectStamps;for(i in n)if(b.call(n,i)&&n[i]==e)return i;return i=t(),n[i]=e,i}Object.defineProperty(e,y,{value:t()})}return e[y]},forEach:function(t,e){for(var i=this._first;i;){t.call(e,i.value,i.key,this);do{i=i.next}while(i&&!this._entries[i.keyStamp])}},toString:function(){return"[object Map]"}},[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach((function(t){var e=t[1];w.prototype[t[0]]=function(){var t,i=this._entries,n=!1,s=this;return{next:function(){if(!n){if(t)do{t=t.next}while(t&&!i[t.keyStamp]);else t=s._first;if(t)return{value:e(t),done:!1};n=!0}return{value:void 0,done:!0}}}}}))}w.prototype[m.iterator]||(w.prototype[m.iterator]=w.prototype.entries);var C=w,I={};e.currentlySubscribing=!1,e.prototype={constructor:e,getEvents:function(t){var e;return t?(e=this._events.get(t),e?e._isEvent===I?[e]:e:[]):(e=Object.create(null),this._events.forEach((function(t,i){e[i]=t._isEvent===I?[t]:t})),e)},on:function(t,e,i){if("object"==typeof t){i=arguments.length>=2?e:this;var n=t;for(t in n)this._on(t,n[t],i)}else this._on(t,e,arguments.length>=3?i:this);return this},off:function(t,e,i){var n=arguments.length;if(n)if("object"==typeof t){i=n>=2?e:this;var s=t;for(t in s)this._off(t,s[t],i)}else this._off(t,e,n>=3?i:this);else this._events.clear();return this},_on:function(t,i,n){var s=t.indexOf(":");if(-1!=s){var r=t.slice(s+1);e.currentlySubscribing=!0,(this[r+"Cell"]||(this[r],this[r+"Cell"])).on(t.slice(0,s),i,n),e.currentlySubscribing=!1}else{var h=this._events.get(t),a={_isEvent:I,listener:i,context:n};h?h._isEvent===I?this._events.set(t,[h,a]):h.push(a):this._events.set(t,a)}},_off:function(t,e,i){var n=t.indexOf(":");if(-1!=n){var s=t.slice(n+1);(this[s+"Cell"]||(this[s],this[s+"Cell"])).off(t.slice(0,n),e,i)}else{var r=this._events.get(t);if(!r)return;var h,a=r._isEvent===I;if(a||1==r.length)(h=a?r:r[0]).listener==e&&h.context===i&&this._events.delete(t);else for(var o=r.length;o;)if((h=r[--o]).listener==e&&h.context===i){r.splice(o,1);break}}},once:function(t,e,i){function n(s){return this._off(t,n,i),e.call(this,s)}return arguments.length<3&&(i=this),this._on(t,n,i),n},emit:function(t){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;return this._handleEvent(t),t},_handleEvent:function(t){var e=this._events.get(t.type);if(e)if(e._isEvent===I)!1===this._tryEventListener(e,t)&&(t.isPropagationStopped=!0);else{var i=e.length;if(1==i)!1===this._tryEventListener(e[0],t)&&(t.isPropagationStopped=!0);else{e=e.slice();for(var n=0;n<i;n++)!1===this._tryEventListener(e[n],t)&&(t.isPropagationStopped=!0)}}},_tryEventListener:function(t,e){try{return t.listener.call(t.context,e)}catch(t){this._logError(t)}},_logError:function(){g.log.apply(g,arguments)}};var S,O=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e};if(x.process&&"[object process]"==process.toString()&&process.nextTick)S=process.nextTick;else if(x.setImmediate)S=function(t){setImmediate(t)};else if(x.Promise&&-1!=Promise.toString().indexOf("[native code]")){var j=Promise.resolve();S=function(t){j.then((function(){t()}))}}else{var R;x.addEventListener("message",(function(){if(R){var t=R;R=null;for(var e=0,i=t.length;e<i;e++)try{t[e]()}catch(t){g.log(t)}}})),S=function(t){R?R.push(t):(R=[t],postMessage("__tic__","*"))}}var k,P=S,T=e.prototype,L=Number.MAX_SAFE_INTEGER||9007199254740991,z=m("wrappers"),A=0,M=new C,D=L,F=-1,N=!1,U=!1,H=null,K={original:null},Y=1,G=0,J=!1,X=[],q=1,B={asynchronous:!0};i(h,{configure:function(t){void 0!==t.asynchronous&&(N&&s(),B.asynchronous=t.asynchronous)},get currentlyPulling(){return!!H},autorun:function(t,e){var i;return new h(function(){var n=this;if(i||(i=function(){n.dispose()}),G){var s=X.indexOf(this);-1!=s&&X.splice(s,1),X.push(this)}else t.call(e,i)},{onChange:n}),i},forceRelease:function(){N&&s()},transaction:function(t){!G++&&N&&s();try{t()}catch(t){g.log(t),J=!0}if(J){for(var e,i=M.values();!(e=i.next()).done;)for(var n=e.value,r=n.length;r;){var a=n[--r];a._value=a._fixedValue,a._levelInRelease=-1,a._changeEvent=null}M.clear(),D=L,F=-1,N=!1,X.length=0}if(!--G&&!J){for(var r=0,o=X.length;r<o;r++){var l=X[r];l instanceof h?l.pull():T._handleEvent.call(l[1],l[0])}J=!1,X.length=0,N&&s()}},afterRelease:function(t){(k||(k=[])).push(t)}}),h.prototype={__proto__:e.prototype,constructor:h,_handleEvent:function(t){G?X.push([t,this]):T._handleEvent.call(this,t)},on:function(t,e,i){return N&&s(),this._activate(),"object"==typeof t?T.on.call(this,t,arguments.length>=2?e:this.owner):T.on.call(this,t,e,arguments.length>=3?i:this.owner),this._state|=2,this},off:function(t,e,i){N&&s();var n=arguments.length;return n?"object"==typeof t?T.off.call(this,t,n>=2?e:this.owner):T.off.call(this,t,e,n>=3?i:this.owner):T.off.call(this),!this._slaves.length&&!this._events.has("change")&&!this._events.has("error")&&2&this._state&&(this._state^=2,this._deactivate(),this._reap&&this._reap.call(this.owner)),this},addChangeListener:function(t,e){return this.on("change",t,arguments.length>=2?e:this.owner)},removeChangeListener:function(t,e){return this.off("change",t,arguments.length>=2?e:this.owner)},addErrorListener:function(t,e){return this.on("error",t,arguments.length>=2?e:this.owner)},removeErrorListener:function(t,e){return this.off("error",t,arguments.length>=2?e:this.owner)},subscribe:function(t,e){function i(e){return t.call(this,e.error||null,e)}var n=t[z];return n&&n.has(t)?this:((n||(t[z]=new C)).set(this,i),arguments.length<2&&(e=this.owner),this.on("change",i,e).on("error",i,e))},unsubscribe:function(t,e){arguments.length<2&&(e=this.owner);var i=t[z],n=i&&i.get(this);return n?(i.delete(this),this.off("change",n,e).off("error",n,e)):this},_registerSlave:function(t){this._activate(),this._slaves.push(t),this._state|=2},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),this._slaves.length||this._events.has("change")||this._events.has("error")||(this._state^=2,this._deactivate(),this._reap&&this._reap.call(this.owner))},_activate:function(){if(this._pull&&!(4&this._state)&&null!==this._masters){var t=this._masters;if(this._version<Y){var e=this._tryPull();!t&&!this._masters&&16&this._state||(e===K?this._fail(K.original,!1):this._push(e,!1,!1)),t=this._masters}if(t){var i=t.length;do{t[--i]._registerSlave(this)}while(i);this._state|=4}}},_deactivate:function(){if(4&this._state){var t=this._masters,e=t.length;do{t[--e]._unregisterSlave(this)}while(e);-1==this._levelInRelease||this._changeEvent||(this._levelInRelease=-1),this._state^=4}},_addToRelease:function(){var t=this._level;if(!(t<=this._levelInRelease)){var e;(M.get(t)||(M.set(t,e=[]),e)).push(this),D>t&&(D=t),F<t&&(F=t),this._levelInRelease=t,N||U||(N=!0,G||B.asynchronous?P(s):s())}},_onValueChange:function(t){this._pushingIndex=++A,this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._state&=~q)):(t.prev=null,this._changeEvent=t,this._state&=~q,this._addToRelease())},get:function(){if(N&&this._pull&&s(),this._pull&&!(4&this._state)&&this._version<Y&&null!==this._masters){var t=this._masters,e=this._tryPull(),i=this._masters;if(t||i||!(16&this._state)){if(i&&2&this._state){var n=i.length;do{i[--n]._registerSlave(this)}while(n);this._state|=4}e===K?this._fail(K.original,!1):this._push(e,!1,!1)}}if(H){var r=H._masters,h=this._level;r?-1==r.indexOf(this)&&(r.push(this),H._level<=h&&(H._level=h+1)):(H._masters=[this],H._level=h+1)}return this._get?this._get(this._value):this._value},pull:function(){if(!this._pull)return!1;N&&s();var t,e,i=2&this._state;i&&(t=this._masters,e=this._level);var n=this._tryPull();if(i){var r=this._masters,h=0;if(r){var a=r.length;do{var o=r[--a];t&&-1!=t.indexOf(o)||(o._registerSlave(this),h++)}while(a)}if(t&&(r?r.length-h:0)<t.length)for(var l=t.length;l;){var u=t[--l];r&&-1!=r.indexOf(u)||u._unregisterSlave(this)}if(r&&r.length?this._state|=4:this._state&=-5,U&&this._level>e)return this._addToRelease(),!1}return n===K?(this._fail(K.original,!1),!0):this._push(n,!1,!0)},_tryPull:function(){if(8&this._state)throw new TypeError("Circular pulling detected");var t=H;H=this,this._state|=8,this._masters=null,this._level=0;try{return this._pull.length?this._pull.call(this.owner,this,this._value):this._pull.call(this.owner)}catch(t){return K.original=t,K}finally{H=t,this._version=Y+U,this._state^=8}},set:function(t){return this._merge&&(t=this._merge(t,this._value)),this._put.length>=3?this._put.call(this.owner,this,t,this._value):this._put.call(this.owner,this,t),this},push:function(t){return this._push(t,!0,!1),this},_push:function(t,i,n){this._state|=16;var s=this._value;if(i&&U&&2&this._state){if(O(t,s))return this._setError(null),!1;var r=this;return(k||(k=[])).push((function(){r._push(t,!0,!1)})),!0}return(i||!U&&n)&&(this._pushingIndex=++A),this._setError(null),!O(t,s)&&(this._value=t,s instanceof e&&s.off("change",this._onValueChange,this),t instanceof e&&t.on("change",this._onValueChange,this),2&this._state||G?this._changeEvent?O(t,this._fixedValue)&&this._state&q?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:s,value:t,prev:this._changeEvent}:(this._changeEvent={target:this,type:"change",oldValue:s,value:t,prev:null},this._state|=q,this._addToRelease()):((i||!U&&n)&&Y++,this._fixedValue=t,this._version=Y+U),!0)},fail:function(t){return this._fail(t,!0),this},_fail:function(t){G&&(J=!0),this._logError(t),t instanceof Error||(t=new Error(String(t))),this._setError(t)},_setError:function(t){(t||this._error)&&(this._error=t,t&&this._handleErrorEvent({type:"error",error:t}))},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,i=0,n=e.length;i<n;i++)e[i]._handleErrorEvent(t)}},reap:function(){for(var t=this._slaves,e=0,i=t.length;e<i;e++)t[e].reap();return this.off()},dispose:function(){return this.reap()}},h.prototype[m.iterator]=function(){return this._value[m.iterator]()},a.prototype={_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var i=this._valueCounts,n=i.get(t);n?i.set(t,n+1):(i.set(t,1),this.adoptsValueChanges&&t instanceof e&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var i=this._valueCounts,n=i.get(t);n>1?i.set(t,n-1):(i.delete(t),this.adoptsValueChanges&&t instanceof e&&t.off("change",this._onItemChange,this))}};var Q=Array.prototype.push,W=Array.prototype.splice;l.prototype=i({__proto__:e.prototype},a.prototype,{constructor:l,_validateIndex:function(t,e){if(void 0===t)return t;if(t<0){if((t+=this.length)<0)throw new RangeError("Index out of valid range")}else if(t>=this.length+(e?1:0))throw new RangeError("Index out of valid range");return t},contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},get:function(t){return this._items[this._validateIndex(t,!0)]},getRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)return i.slice(t);if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');return i.slice(t,t+e)},set:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var i=this._items;return O(e,i[t])?this:(this._unregisterValue(i[t]),this._registerValue(e),i[t]=e,this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0),e instanceof l&&(e=e._items);var i=e.length;if(!i)return this;if(t+i>this.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');for(var n=this._items,s=!1,r=t+i;r>t;){var h=e[--r-t];O(h,n[r])||(this._unregisterValue(n[r]),this._registerValue(h),n[r]=h,s=!0)}return s&&this.emit("change"),this},add:function(t){return this.sorted?this._insertValue(t):(this._registerValue(t),this._items.push(t)),this.length++,this.emit("change"),this},addRange:function(t){return t.length&&(this._addRange(t),this.emit("change")),this},_addRange:function(t){if(t instanceof l&&(t=t._items),this.sorted){for(var e=0,i=t.length;e<i;e++)this._insertValue(t[e]);this.length+=t.length}else{for(var n=t.length;n;)this._registerValue(t[--n]);this.length=Q.apply(this._items,t)}},_insertValue:function(t){this._registerValue(t);for(var e=this._items,i=this.comparator,n=0,s=e.length;n!=s;){var r=n+s>>1;i(t,e[r])<0?s=r:n=r+1}e.splice(n,0,t)},insert:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._registerValue(e),this._items.splice(t,0,e),this.length++,this.emit("change"),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");t=this._validateIndex(t,!0),e instanceof l&&(e=e._items);var i=e.length;if(!i)return this;for(var n=i;n;)this._registerValue(e[--n]);return W.apply(this._items,[t,0].concat(e)),this.length+=i,this.emit("change"),this},remove:function(t,e){var i=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=i&&(this._unregisterValue(t),this._items.splice(i,1),this.length--,this.emit("change"),!0)},removeAll:function(t,e){for(var i=this._validateIndex(e,!0),n=this._items,s=!1;-1!=(i=n.indexOf(t,i));)this._unregisterValue(t),n.splice(i,1),s=!0;return s&&(this.length=n.length,this.emit("change")),s},removeEach:function(t,e){e=this._validateIndex(e,!0),t instanceof l&&(t=t._items);for(var i=this._items,n=!1,s=0,r=t.length;s<r;s++){var h=t[s],a=i.indexOf(h,e);-1!=a&&(this._unregisterValue(h),i.splice(a,1),n=!0)}return n&&(this.length=i.length,this.emit("change")),n},removeAllEach:function(t,e){e=this._validateIndex(e,!0),t instanceof l&&(t=t._items);for(var i=this._items,n=!1,s=0,r=t.length;s<r;s++)for(var h=t[s],a=e;-1!=(a=i.indexOf(h,a));)this._unregisterValue(h),i.splice(a,1),n=!0;return n&&(this.length=i.length,this.emit("change")),n},removeAt:function(t){var e=this._items.splice(this._validateIndex(t),1)[0];return this._unregisterValue(e),this.length--,this.emit("change"),e},removeRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)e=i.length-t;else if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');if(!e)return[];for(var n=t+e;n>t;)this._unregisterValue(i[--n]);var s=i.splice(t,e);return this.length-=e,this.emit("change"),s},clear:function(){return this.length?(this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof e&&t.off("change",this._onItemChange,this)}),this),this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit({type:"change",subtype:"clear"}),this):this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){for(var i=this._items,n=0,s=i.length;n<s;n++){var r=i[n];if(t.call(e,r,n,this))return r}},findIndex:function(t,e){for(var i=this._items,n=0,s=i.length;n<s;n++)if(t.call(e,i[n],n,this))return n;return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}}),["forEach","map","filter","every","some"].forEach((function(t){l.prototype[t]=function(e,i){return this._items[t]((function(t,n){return e.call(i,t,n,this)}),this)}})),["reduce","reduceRight"].forEach((function(t){l.prototype[t]=function(e,i){function n(t,i,n){return e(t,i,n,r)}var s=this._items,r=this;return arguments.length>=2?s[t](n,i):s[t](n)}})),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach((function(t){var e=t[1];l.prototype[t[0]]=function(){var t=this._items,i=0,n=!1;return{next:function(){if(!n){if(i<t.length)return{value:e(i,t[i++]),done:!1};n=!0}return{value:void 0,done:!0}}}}})),l.prototype[m.iterator]=l.prototype.values,u.prototype=i({__proto__:e.prototype},a.prototype,{constructor:u,has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var i,n=this._entries,s=n.has(t);if(s){if(i=n.get(t),O(e,i))return this;this._unregisterValue(i)}return this._registerValue(e),n.set(t,e),s||this.size++,this.emit({type:"change",subtype:s?"update":"add",key:t,oldValue:i,value:e}),this},delete:function(t){var e=this._entries;if(!e.has(t))return!1;var i=e.get(t);return this._unregisterValue(i),e.delete(t),this.size--,this.emit({type:"change",subtype:"delete",key:t,oldValue:i,value:void 0}),!0},clear:function(){return this.size?(this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof e&&t.off("change",this._onItemChange,this)}),this),this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,e){this._entries.forEach((function(i,n){t.call(e,i,n,this)}),this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges})}}),u.prototype[m.iterator]=u.prototype.entries;var Z=Array.prototype.map;g.setHandler(c);var $={};return $.ErrorLogger=g,$.EventEmitter=e,$.ObservableCollectionMixin=a,$.ObservableMap=u,$.ObservableList=l,$.Cell=h,$.autorun=h.autorun,$.transact=$.transaction=h.transaction,$.KEY_UID=y,$.KEY_CELLS=E,$.defineObservableProperty=f,$.defineObservableProperties=_,$.define=v,$.JS={is:O,Symbol:m,Map:C},$.Utils={logError:c,nextUID:t,mixin:i,nextTick:P,noop:n},$.cellx=$,$.__esModule=!0,$.default=$,$}));